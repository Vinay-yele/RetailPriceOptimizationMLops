<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retail Price Optimization</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.1rem;
            color: #666;
            max-width: 600px;
            margin: 0 auto;
        }

        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .info-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .info-card h3 {
            color: #2c3e50;
            margin-bottom: 1rem;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .info-card p {
            color: #666;
            margin-bottom: 1rem;
        }

        .feature-list {
            list-style: none;
            padding: 0;
        }

        .feature-list li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
            color: #555;
        }

        .feature-list li::before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: #667eea;
            font-weight: bold;
        }

        .prediction-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .prediction-section h2 {
            color: #2c3e50;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
            font-weight: 600;
            text-align: center;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 500;
            color: #555;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .form-group input {
            padding: 0.8rem;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.8);
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .submit-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 0 auto;
            min-width: 200px;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .submit-btn:active {
            transform: translateY(-1px);
        }

        .result {
            text-align: center;
            margin-top: 2rem;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 600;
            color: #2c3e50;
            border: 2px solid #e1e8ed;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .result.success {
            background: rgba(76, 175, 80, 0.1);
            border-color: #4caf50;
            color: #2e7d32;
        }

        .result.error {
            background: rgba(244, 67, 54, 0.1);
            border-color: #f44336;
            color: #c62828;
        }

        .loading {
            display: none;
            text-align: center;
            margin-top: 1rem;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .container {
                padding: 1rem;
            }
        }

        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.8rem;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Retail Price Optimization</h1>
            <p>Advanced machine learning-powered pricing strategy tool designed to optimize retail pricing decisions through comprehensive competitor analysis and market intelligence.</p>
        </div>

        <div class="content-grid">
            <div class="info-card">
                <h3>About This Project</h3>
                <p>This retail price optimization system leverages advanced machine learning algorithms to predict optimal pricing strategies. By analyzing multiple market factors including competitor pricing, freight costs, and historical price trends, the system provides data-driven recommendations for maximizing profitability while maintaining competitive positioning.</p>
                <p>The model considers complex relationships between various pricing components to deliver accurate total price predictions that can inform strategic pricing decisions.</p>
            </div>

            <div class="info-card">
                <h3>Key Features</h3>
                <ul class="feature-list">
                    <li>Multi-competitor price analysis</li>
                    <li>Freight cost optimization</li>
                    <li>Historical price trend analysis</li>
                    <li>Real-time price prediction</li>
                    <li>Market positioning insights</li>
                    <li>Profit margin optimization</li>
                    <li>Dynamic pricing recommendations</li>
                </ul>
            </div>
        </div>

        <div class="prediction-section">
            <h2>Price Prediction Engine</h2>
            <form id="predict-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="unit_price" class="tooltip">Unit Price
                            <span class="tooltiptext">Base price per unit before additional costs</span>
                        </label>
                        <input type="number" id="unit_price" name="unit_price" step="0.01" required placeholder="Enter unit price">
                    </div>

                    <div class="form-group">
                        <label for="freight_price" class="tooltip">Freight Price
                            <span class="tooltiptext">Shipping and logistics cost per unit</span>
                        </label>
                        <input type="number" id="freight_price" name="freight_price" step="0.01" required placeholder="Enter freight cost">
                    </div>

                    <div class="form-group">
                        <label for="lag_price" class="tooltip">Lag Price
                            <span class="tooltiptext">Previous period pricing reference</span>
                        </label>
                        <input type="number" id="lag_price" name="lag_price" step="0.01" required placeholder="Enter lag price">
                    </div>

                    <div class="form-group">
                        <label for="comp_1" class="tooltip">Competitor 1 Price
                            <span class="tooltiptext">Primary competitor's current price</span>
                        </label>
                        <input type="number" id="comp_1" name="comp_1" step="0.01" required placeholder="Enter competitor 1 price">
                    </div>

                    <div class="form-group">
                        <label for="ps1" class="tooltip">PS1 (Price Sensitivity 1)
                            <span class="tooltiptext">Price sensitivity metric for competitor 1</span>
                        </label>
                        <input type="number" id="ps1" name="ps1" step="0.01" required placeholder="Enter PS1 value">
                    </div>

                    <div class="form-group">
                        <label for="fp1" class="tooltip">FP1 (Feature Premium 1)
                            <span class="tooltiptext">Feature-based premium for competitor 1</span>
                        </label>
                        <input type="number" id="fp1" name="fp1" step="0.01" required placeholder="Enter FP1 value">
                    </div>

                    <div class="form-group">
                        <label for="comp_2" class="tooltip">Competitor 2 Price
                            <span class="tooltiptext">Secondary competitor's current price</span>
                        </label>
                        <input type="number" id="comp_2" name="comp_2" step="0.01" required placeholder="Enter competitor 2 price">
                    </div>

                    <div class="form-group">
                        <label for="ps2" class="tooltip">PS2 (Price Sensitivity 2)
                            <span class="tooltiptext">Price sensitivity metric for competitor 2</span>
                        </label>
                        <input type="number" id="ps2" name="ps2" step="0.01" required placeholder="Enter PS2 value">
                    </div>

                    <div class="form-group">
                        <label for="fp2" class="tooltip">FP2 (Feature Premium 2)
                            <span class="tooltiptext">Feature-based premium for competitor 2</span>
                        </label>
                        <input type="number" id="fp2" name="fp2" step="0.01" required placeholder="Enter FP2 value">
                    </div>

                    <div class="form-group">
                        <label for="comp_3" class="tooltip">Competitor 3 Price
                            <span class="tooltiptext">Third competitor's current price</span>
                        </label>
                        <input type="number" id="comp_3" name="comp_3" step="0.01" required placeholder="Enter competitor 3 price">
                    </div>

                    <div class="form-group">
                        <label for="ps3" class="tooltip">PS3 (Price Sensitivity 3)
                            <span class="tooltiptext">Price sensitivity metric for competitor 3</span>
                        </label>
                        <input type="number" id="ps3" name="ps3" step="0.01" required placeholder="Enter PS3 value">
                    </div>

                    <div class="form-group">
                        <label for="fp3" class="tooltip">FP3 (Feature Premium 3)
                            <span class="tooltiptext">Feature-based premium for competitor 3</span>
                        </label>
                        <input type="number" id="fp3" name="fp3" step="0.01" required placeholder="Enter FP3 value">
                    </div>
                </div>

                <button type="submit" class="submit-btn">Generate Price Prediction</button>
            </form>

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Analyzing market data and generating prediction...</p>
            </div>

            <div id="result" class="result">
                Enter pricing parameters above to generate an optimized price prediction
            </div>
        </div>
    </div>

    <script>
        const form = document.getElementById('predict-form');
        const resultDiv = document.getElementById('result');
        const loadingDiv = document.getElementById('loading');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            // Show loading state
            loadingDiv.classList.add('show');
            resultDiv.textContent = '';
            resultDiv.className = 'result';

            const features = {
                unit_price: parseFloat(document.getElementById('unit_price').value),
                freight_price: parseFloat(document.getElementById('freight_price').value),
                lag_price: parseFloat(document.getElementById('lag_price').value),
                comp_1: parseFloat(document.getElementById('comp_1').value),
                ps1: parseFloat(document.getElementById('ps1').value),
                fp1: parseFloat(document.getElementById('fp1').value),
                comp_2: parseFloat(document.getElementById('comp_2').value),
                ps2: parseFloat(document.getElementById('ps2').value),
                fp2: parseFloat(document.getElementById('fp2').value),
                comp_3: parseFloat(document.getElementById('comp_3').value),
                ps3: parseFloat(document.getElementById('ps3').value),
                fp3: parseFloat(document.getElementById('fp3').value),
            };

            try {
                const response = await fetch('/predict', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(features)
                });

                // Hide loading state
                loadingDiv.classList.remove('show');

                if (!response.ok) {
                    throw new Error(`Server error: ${response.status}`);
                }

                const data = await response.json();
                resultDiv.textContent = `Predicted Optimal Price: $${parseFloat(data.predicted_total_price).toFixed(2)}`;
                resultDiv.classList.add('success');
            } catch (error) {
                // Hide loading state
                loadingDiv.classList.remove('show');
                resultDiv.textContent = `Error: ${error.message}`;
                resultDiv.classList.add('error');
            }
        });

        // Add smooth scrolling to form submission
        form.addEventListener('submit', () => {
            setTimeout(() => {
                resultDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 100);
        });
    </script>
</body>
</html>